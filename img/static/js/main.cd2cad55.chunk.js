(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{22:function(e,t,a){e.exports=a(40)},27:function(e,t,a){},28:function(e,t,a){},30:function(e,t,a){},31:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),l=a(20),r=a.n(l),c=(a(27),a(28),a(29),a(3)),i=a(4),s=a(6),u=a(5),m=a(10),p=a(1),v=(a(30),function(e){return o.a.createElement("div",null,o.a.createElement("img",{src:e.source.url,alt:e.source.alt}))}),f=(a(31),a(7)),h=a.n(f),d=a(12),C="https://meme-server2.herokuapp.com/img",g={getAllImages:function(){var e=Object(d.a)(h.a.mark((function e(){var t,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(C,{mode:"cors"});case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getFaveCollections:function(){var e=Object(d.a)(h.a.mark((function e(){var t,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(C+"/favoriteCollectionsList",{mode:"cors"});case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),addToFaveImages:function(){var e=Object(d.a)(h.a.mark((function e(t,a,n){var o,l,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({name:t,_id:a,url:n,alt:""})},e.next=3,fetch(C+"/addToFavoritesCollection",o);case 3:return l=e.sent,e.next=6,l.json();case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),removeFromFaveImages:function(){var e=Object(d.a)(h.a.mark((function e(t,a){var n,o,l;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({name:t,_id:a})},e.next=3,fetch(C+"/removeFromFavoritesCollection/"+t+"/"+a,n);case 3:return o=e.sent,e.next=6,o.json();case 6:return l=e.sent,e.abrupt("return",l);case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},E=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).toggleClass=function(t){var a=e.state.favorited;e.setState({favorited:!a}),!0!==e.state.favorited?(g.addToFaveImages(e.props.collectionName,e.props.source._id,e.props.source.url),e.props.showColumn?t.stopPropagation():e.props.updateFaves()):(g.removeFromFaveImages(e.props.collectionName,e.props.source._id),e.props.showColumn?t.stopPropagation():e.props.updateFaves())},e.state={favorited:!1},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){if(this.props.faveImageData){var e=-1!==this.props.faveImageData.map((function(e){return e._id})).indexOf(this.props.source._id);this.setState({favorited:e})}}},{key:"render",value:function(){return this.props.collectionName&&this.props.showColumn?o.a.createElement(o.a.Fragment,null,o.a.createElement(v,{source:this.props.source}),o.a.createElement("i",{className:!0===this.state.favorited?"fas fa-heart":"far fa-heart",onClick:this.toggleClass})):o.a.createElement(o.a.Fragment,null,o.a.createElement(v,{source:this.props.source}))}}]),a}(n.Component),b=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).state={image:null,ref:null,showColumn:!1},e}return Object(i.a)(a,[{key:"displayColumn",value:function(e){var t=this;this.setState({showColumn:!this.state.showColumn,image:e},(function(){t.props.collectionName&&!1===t.state.showColumn&&t.props.updateFaves()}))}},{key:"scrollToImage",value:function(e){var t=this;this.setState({ref:e.current},(function(){t.state.ref.scrollIntoView({behavior:"smooth",block:"start"})}))}},{key:"render",value:function(){var e=this,t=this.props.isFaveCollection?this.props.faveImageData:this.props.allImageData,a=this.props.collectionName,n=this.props.updateFaves;return this.props.isLoaded?this.props.isFaveCollection&&!this.props.faveImageData?o.a.createElement("div",null,"No favorite images"):o.a.createElement("div",{className:this.state.showColumn?"column":"grid"},o.a.createElement("ul",null,t.map((function(t,l){var r=o.a.createRef();return o.a.createElement("li",{id:l,key:l,ref:r,onClick:function(){e.displayColumn(t),e.scrollToImage(r)}},o.a.createElement(E,{source:t,faveImageData:e.props.faveImageData,collectionName:a,updateFaves:n,showColumn:e.state.showColumn}))})))):o.a.createElement("div",null,"Loading... ",this.props.isLoaded)}}]),a}(n.Component),F=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this)).handleChange=function(e){"Select a folder"!==e.target.name&&n.setState({nameValue:e.target.value})},n.handleSubmit=function(e){e.preventDefault(),""!==n.state.nameValue&&"Select a folder"!==n.state.nameValue&&(n.props.loadFaveCollection(n.state.nameValue),n.goToFaves())},n.state={nameValue:"",submissionSuccess:""},n}return Object(i.a)(a,[{key:"goToFaves",value:function(){this.props.history.push("/img/favorites")}},{key:"render",value:function(){var e=this;return this.props.signInClick?o.a.createElement("div",{className:"choose-fave form"},o.a.createElement("h3",null,"Choose a favorites collection"),o.a.createElement("form",{onSubmit:this.handleSubmit},o.a.createElement("select",{onChange:this.handleChange},this.props.faveImageCollections.map((function(e,t){return o.a.createElement("option",{key:t,value:e.name},e.name)}))),o.a.createElement("input",{type:"submit",value:"Submit"}))):o.a.createElement("input",{type:"submit",value:"Choose One",onClick:function(){e.props.displayCreateCollectionComp(!1)}})}}]),a}(n.Component),w=Object(p.g)(F),y={addCollection:function(){var e=Object(d.a)(h.a.mark((function e(t){var a,n,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({name:t,account:Math.floor(1e5+9e5*Math.random())})},e.next=3,fetch("https://meme-server2.herokuapp.com/img/addCollection",a);case 3:return n=e.sent,e.next=6,n.json();case 6:return o=e.sent,e.abrupt("return",o);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getCollection:function(){var e=Object(d.a)(h.a.mark((function e(t){var a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://meme-server2.herokuapp.com/img/favorites/"+t);case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},k=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this)).handleChange=function(e){"name"===e.target.name&&n.setState({nameValue:e.target.value})},n.handleSubmit=function(e){e.preventDefault(),y.addCollection(n.state.nameValue).then((function(e){n.setState({submissionSuccess:Boolean(e)})}))},n.state={nameValue:"",submissionSuccess:""},n}return Object(i.a)(a,[{key:"goToFaves",value:function(){this.props.history.push("/img")}},{key:"componentDidUpdate",value:function(){try{this.state.submissionSuccess&&(this.props.loadFaveCollection(this.state.nameValue),this.props.updateFaveCollectionsList(),this.goToFaves())}catch(e){console.log(e)}}},{key:"render",value:function(){var e=this;return this.props.createNewClick?o.a.createElement("div",{className:"create-fave form"},o.a.createElement("h3",null,"Create a new favorites folder"),o.a.createElement("form",{onSubmit:this.handleSubmit},o.a.createElement("label",{htmlFor:"name"},"Add a name:",o.a.createElement("input",{type:"text",name:"name",onChange:this.handleChange})),o.a.createElement("input",{type:"submit",value:"Submit"}))):o.a.createElement("input",{type:"submit",value:"Create New",onClick:function(){e.props.displayCreateCollectionComp(!0)}})}}]),a}(n.Component),I=Object(p.g)(k),j=(a(38),function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this)).displayCreateCollectionComp=function(e){n.setState({showCreateCollectionComp:e})},n.componentDidMount=function(){n.setState({showCreateCollectionComp:n.props.createNewClick})},n.state={showCreateCollectionComp:!1},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props,t=e.faveImageCollections,a=e.loadFaveCollection,n=e.updateFaveCollectionsList;return this.state.showCreateCollectionComp?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"fave-selection-container"},o.a.createElement(w,{signInClick:!1,faveImageCollections:t,displayCreateCollectionComp:this.displayCreateCollectionComp}),o.a.createElement(I,{createNewClick:!0,loadFaveCollection:a,updateFaveCollectionsList:n}))):o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"fave-selection-container"},o.a.createElement(I,{createNewClick:!1,displayCreateCollectionComp:this.displayCreateCollectionComp}),o.a.createElement(w,{signInClick:!0,faveImageCollections:t,loadFaveCollection:a})))}}]),a}(n.Component)),N=(a(39),function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).displayMenu=function(){e.setState({showMenu:!e.state.showMenu})},e.state={showFaves:!0,showMenu:!1},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.allImageData,n=t.faveImageData,l=t.faveImageCollections,r=t.isLoaded,c=t.isFaveCollection,i=t.createNewClick,s=t.collectionName,u=t.updateFaves,v=t.loadFaveCollection,f=t.updateFaveCollectionsList;return""!==this.props.collectionName?o.a.createElement(m.a,null,o.a.createElement("div",{className:"navigation",onClick:function(){e.displayMenu()}},o.a.createElement("h1",null,"img"),o.a.createElement("ul",{className:this.state.showMenu?"show":"hide"},o.a.createElement("li",null,o.a.createElement(m.b,{to:"/img",onClick:function(){e.props.updateFaves()}},"All Memes")),o.a.createElement("li",null,o.a.createElement(m.b,{to:"/img/create-faves"},"Start a Collection")),o.a.createElement("li",null,o.a.createElement(m.b,{to:"/img/view-faves"},"Choose a Fave Collection")),o.a.createElement("li",null,o.a.createElement(m.b,{to:"/img/favorites",onClick:function(){e.props.updateFaves()}},"Fave Memes"))),o.a.createElement("button",null,o.a.createElement("span",null,"|"),o.a.createElement("span",null,"|"),o.a.createElement("span",null,"|"))),o.a.createElement(p.d,null,o.a.createElement(p.b,{exact:!0,path:"/img",component:function(){return o.a.createElement(b,{allImageData:a,faveImageData:n,isLoaded:r,isFaveCollection:!c,collectionName:s,updateFaves:u})}}),o.a.createElement(p.b,{path:"/img/create-faves",render:function(){return e.props.isLoaded?o.a.createElement(j,{faveImageCollections:l,createNewClick:i,loadFaveCollection:v,updateFaveCollectionsList:f}):o.a.createElement(p.a,{to:"/img"})}}),o.a.createElement(p.b,{path:"/img/view-faves",component:function(){return o.a.createElement(j,{faveImageCollections:l,loadFaveCollection:v,updateFaveCollectionsList:f})}}),o.a.createElement(p.b,{path:"/img/favorites",component:function(){return o.a.createElement(b,{faveImageData:n,isLoaded:r,isFaveCollection:c,collectionName:s,updateFaves:u})}}))):o.a.createElement(m.a,null,o.a.createElement("div",{className:"navigation",onClick:function(){e.displayMenu()}},o.a.createElement("h1",null,"img"),o.a.createElement("ul",{className:this.state.showMenu?"show":"hide"},o.a.createElement("li",null,o.a.createElement(m.b,{to:"/img"},"All Memes")),o.a.createElement("li",null,o.a.createElement(m.b,{to:"/img/create-faves"},"Start a Collection")),o.a.createElement("li",null,o.a.createElement(m.b,{to:"/img/view-faves"},"Choose a Fave Collection"))),o.a.createElement("button",null,o.a.createElement("span",null,"|"),o.a.createElement("span",null,"|"),o.a.createElement("span",null,"|"))),o.a.createElement(p.d,null,o.a.createElement(p.b,{exact:!0,path:"/img",component:function(){return o.a.createElement(b,{allImageData:a,faveImageData:n,isLoaded:r,collectionName:s})}}),o.a.createElement(p.b,{path:"/img/create-faves",render:function(){return e.props.isLoaded?o.a.createElement(j,{faveImageCollections:l,createNewClick:i,loadFaveCollection:v,updateFaveCollectionsList:f}):o.a.createElement(b,{allImageData:a,faveImageData:n,isLoaded:r,collectionName:s})}}),o.a.createElement(p.b,{path:"/img/view-faves",component:function(){return o.a.createElement(j,{faveImageCollections:l,loadFaveCollection:v,updateFaveCollectionsList:f})}})))}}]),a}(n.Component)),O=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).updateFaves=function(){e.getFaves(e.state.collectionName)},e.loadFaveCollection=function(t){e.setState({collectionName:t},(function(){e.getFaves(e.state.collectionName)}))},e.getFaves=function(t){y.getCollection(t).then((function(t){e.setState({faveImageData:t[0].images})}))},e.updateFaveCollectionsList=function(){g.getFaveCollections().then((function(t){return e.setState({isLoaded:!0,faveImageCollections:t})}))},e.state={allImageData:[],faveImageData:[],faveImageCollections:[],isLoaded:!1,isFaveCollection:!0,createNewClick:!0,hasFaves:!1,collectionName:""},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;g.getAllImages().then((function(t){e.setState({allImageData:t})})),this.updateFaveCollectionsList()}},{key:"render",value:function(){var e=this.state,t=e.allImageData,a=e.faveImageData,n=e.faveImageCollections,l=e.isLoaded,r=e.isFaveCollection,c=e.createNewClick,i=e.collectionName;return o.a.createElement("div",{className:"main"},o.a.createElement(N,{allImageData:t,faveImageData:a,faveImageCollections:n,isLoaded:l,isFaveCollection:r,createNewClick:c,collectionName:i,loadFaveCollection:this.loadFaveCollection,updateFaves:this.updateFaves,updateFaveCollectionsList:this.updateFaveCollectionsList}))}}]),a}(n.Component);var S=function(){return o.a.createElement("div",{className:"App"},o.a.createElement(O,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(S,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[22,1,2]]]);
//# sourceMappingURL=main.cd2cad55.chunk.js.map