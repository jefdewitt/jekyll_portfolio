(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{22:function(e,t,a){e.exports=a(40)},27:function(e,t,a){},28:function(e,t,a){},30:function(e,t,a){},31:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),l=a(20),i=a.n(l),c=(a(27),a(28),a(29),a(3)),s=a(4),r=a(6),u=a(5),m=a(9),p=a(1),v=(a(30),function(e){return o.a.createElement("div",null,o.a.createElement("img",{src:e.source.url,alt:e.source.alt}))}),h=(a(31),a(11)),f=a.n(h),d=a(14),g={getAllImages:function(){var e=Object(d.a)(f.a.mark((function e(){var t,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://meme-server.herokuapp.com/img");case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getFaveCollections:function(){var e=Object(d.a)(f.a.mark((function e(){var t,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://meme-server.herokuapp.com/img/fave-collections");case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),addToFaveImages:function(e,t,a){fetch("https://meme-server.herokuapp.com/img/add-to-favorites",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({name:e,_id:t,url:a,alt:""})})},removeFromFaveImages:function(e,t){fetch("https://meme-server.herokuapp.com/img/remove-from-favorites/"+e+"/"+t,{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({name:e,_id:t})}).then((function(e){console.log("result",e)})).catch((function(e){return console.error(e)}))}},C=function(e){Object(r.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).toggleClass=function(t){var a=e.state.favorited;e.setState({favorited:!a}),!0!==e.state.favorited?(g.addToFaveImages(e.props.collectionName,e.props.source._id,e.props.source.url),e.props.showColumn?t.stopPropagation():e.props.updateFaves()):(g.removeFromFaveImages(e.props.collectionName,e.props.source._id),e.props.showColumn?t.stopPropagation():e.props.updateFaves())},e.state={favorited:!1},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){if(this.props.faveImageData){var e=-1!==this.props.faveImageData.map((function(e){return e._id})).indexOf(this.props.source._id);this.setState({favorited:e})}}},{key:"render",value:function(){return this.props.collectionName&&this.props.showColumn?o.a.createElement(o.a.Fragment,null,o.a.createElement(v,{source:this.props.source}),o.a.createElement("i",{className:!0===this.state.favorited?"fas fa-heart":"far fa-heart",onClick:this.toggleClass})):o.a.createElement(o.a.Fragment,null,o.a.createElement(v,{source:this.props.source}))}}]),a}(n.Component),E=function(e){Object(r.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).state={image:null,ref:null,showColumn:!1},e}return Object(s.a)(a,[{key:"displayColumn",value:function(e){var t=this;this.setState({showColumn:!this.state.showColumn,image:e},(function(){t.props.collectionName&&!1===t.state.showColumn&&t.props.updateFaves()}))}},{key:"scrollToImage",value:function(e){var t=this;this.setState({ref:e.current},(function(){t.state.ref.scrollIntoView({behavior:"smooth",block:"start"})}))}},{key:"render",value:function(){var e=this,t=this.props.isFaveCollection?this.props.faveImageData:this.props.allImageData,a=this.props.collectionName,n=this.props.updateFaves;return console.log(!this.props.isFaveCollection&&!this.props.faveImageData),this.props.isLoaded?this.props.isFaveCollection&&!this.props.faveImageData?o.a.createElement("div",null,"No favorite images"):o.a.createElement("div",{className:this.state.showColumn?"column":"grid"},o.a.createElement("ul",null,t.map((function(t,l){var i=o.a.createRef();return o.a.createElement("li",{id:l,key:l,ref:i,onClick:function(){e.displayColumn(t),e.scrollToImage(i)}},o.a.createElement(C,{source:t,faveImageData:e.props.faveImageData,collectionName:a,updateFaves:n,showColumn:e.state.showColumn}))})))):o.a.createElement("div",null,"Loading... ",this.props.isLoaded)}}]),a}(n.Component),b=function(e){Object(r.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this)).handleChange=function(e){"Select a folder"!==e.target.name&&n.setState({nameValue:e.target.value})},n.handleSubmit=function(e){e.preventDefault(),""!==n.state.nameValue&&"Select a folder"!==n.state.nameValue&&(n.props.loadFaveCollection(n.state.nameValue),n.goToFaves())},n.state={nameValue:"",submissionSuccess:""},n}return Object(s.a)(a,[{key:"goToFaves",value:function(){this.props.history.push("/img/favorites")}},{key:"render",value:function(){var e=this;return this.props.signInClick?o.a.createElement("div",{className:"choose-fave form"},o.a.createElement("h3",null,"Choose a favorites collection"),o.a.createElement("form",{onSubmit:this.handleSubmit},o.a.createElement("select",{onChange:this.handleChange},this.props.faveImageCollections.map((function(e,t){return o.a.createElement("option",{key:t,value:e.name},e.name)}))),o.a.createElement("input",{type:"submit",value:"Submit"}))):o.a.createElement("input",{type:"submit",value:"Choose One",onClick:function(){e.props.displayJoinNow(!1)}})}}]),a}(n.Component),F=Object(p.g)(b),w={addCollection:function(e){return fetch("https://meme-server.herokuapp.com/img/add-collection",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({name:e,account:Math.floor(1e5+9e5*Math.random())})})},getCollection:function(){var e=Object(d.a)(f.a.mark((function e(t){var a,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://meme-server.herokuapp.com/img/get-collection/"+t);case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},N=function(e){Object(r.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this)).handleChange=function(e){"name"===e.target.name&&n.setState({nameValue:e.target.value})},n.handleSubmit=function(e){e.preventDefault(),w.addCollection(n.state.nameValue).then((function(e){n.setState({submissionSuccess:e})}))},n.state={nameValue:"",submissionSuccess:""},n}return Object(s.a)(a,[{key:"goToFaves",value:function(){this.props.history.push("/img")}},{key:"componentDidUpdate",value:function(){try{this.state.submissionSuccess.ok&&(this.props.loadFaveCollection(this.state.nameValue),this.props.updateFaveCollectionsList(),this.goToFaves())}catch(e){console.log(e)}}},{key:"render",value:function(){var e=this;return this.props.createNewClick?o.a.createElement("div",{className:"create-fave form"},o.a.createElement("h3",null,"Create a new favorites folder"),o.a.createElement("form",{onSubmit:this.handleSubmit},o.a.createElement("label",{htmlFor:"name"},"Add a name:",o.a.createElement("input",{type:"text",name:"name",onChange:this.handleChange})),o.a.createElement("input",{type:"submit",value:"Submit"}))):o.a.createElement("input",{type:"submit",value:"Create New",onClick:function(){e.props.displayJoinNow(!0)}})}}]),a}(n.Component),k=Object(p.g)(N),y=(a(38),function(e){Object(r.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this)).displayJoinNow=function(e){n.setState({showJoinNow:e})},n.componentDidMount=function(){n.setState({showJoinNow:n.props.createNewClick})},n.state={showJoinNow:!1},n}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props,t=e.faveImageCollections,a=e.loadFaveCollection,n=e.updateFaveCollectionsList;return this.state.showJoinNow?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"fave-selection-container"},o.a.createElement(F,{signInClick:!1,faveImageCollections:t,displayJoinNow:this.displayJoinNow}),o.a.createElement(k,{createNewClick:!0,loadFaveCollection:a,updateFaveCollectionsList:n}))):o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"fave-selection-container"},o.a.createElement(k,{createNewClick:!1,displayJoinNow:this.displayJoinNow}),o.a.createElement(F,{signInClick:!0,faveImageCollections:t,loadFaveCollection:a})))}}]),a}(n.Component)),I=(a(39),function(e){Object(r.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).displayMenu=function(){e.setState({showMenu:!e.state.showMenu})},e.state={showFaves:!0,showMenu:!1},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.allImageData,n=t.faveImageData,l=t.faveImageCollections,i=t.isLoaded,c=t.isFaveCollection,s=t.createNewClick,r=t.collectionName,u=t.updateFaves,v=t.loadFaveCollection,h=t.updateFaveCollectionsList;return""!==this.props.collectionName?o.a.createElement(m.a,null,o.a.createElement("div",{className:"navigation",onClick:function(){e.displayMenu()}},o.a.createElement("h1",null,"img"),o.a.createElement("ul",{className:this.state.showMenu?"show":"hide"},o.a.createElement("li",null,o.a.createElement(m.b,{to:"/img",onClick:function(){e.props.updateFaves()}},"All Memes")),o.a.createElement("li",null,o.a.createElement(m.b,{to:"/img/create-faves"},"Start a Collection")),o.a.createElement("li",null,o.a.createElement(m.b,{to:"/img/view-faves"},"Choose a Fave Collection")),o.a.createElement("li",null,o.a.createElement(m.b,{to:"/img/favorites",onClick:function(){e.props.updateFaves()}},"Fave Memes"))),o.a.createElement("button",null,o.a.createElement("span",null,"|"),o.a.createElement("span",null,"|"),o.a.createElement("span",null,"|"))),o.a.createElement(p.d,null,o.a.createElement(p.b,{exact:!0,path:"/img",component:function(){return o.a.createElement(E,{allImageData:a,faveImageData:n,isLoaded:i,isFaveCollection:!c,collectionName:r,updateFaves:u})}}),o.a.createElement(p.b,{path:"/img/create-faves",render:function(){return e.props.isLoaded?o.a.createElement(y,{faveImageCollections:l,createNewClick:s,loadFaveCollection:v,updateFaveCollectionsList:h}):o.a.createElement(p.a,{to:"/img"})}}),o.a.createElement(p.b,{path:"/img/view-faves",component:function(){return o.a.createElement(y,{faveImageCollections:l,loadFaveCollection:v,updateFaveCollectionsList:h})}}),o.a.createElement(p.b,{path:"/img/favorites",component:function(){return o.a.createElement(E,{faveImageData:n,isLoaded:i,isFaveCollection:c,collectionName:r,updateFaves:u})}}))):o.a.createElement(m.a,null,o.a.createElement("div",{className:"navigation",onClick:function(){e.displayMenu()}},o.a.createElement("h1",null,"img"),o.a.createElement("ul",{className:this.state.showMenu?"show":"hide"},o.a.createElement("li",null,o.a.createElement(m.b,{to:"/img"},"All Memes")),o.a.createElement("li",null,o.a.createElement(m.b,{to:"/img/create-faves"},"Start a Collection")),o.a.createElement("li",null,o.a.createElement(m.b,{to:"/img/view-faves"},"Choose a Fave Collection"))),o.a.createElement("button",null,o.a.createElement("span",null,"|"),o.a.createElement("span",null,"|"),o.a.createElement("span",null,"|"))),o.a.createElement(p.d,null,o.a.createElement(p.b,{exact:!0,path:"/img",component:function(){return o.a.createElement(E,{allImageData:a,faveImageData:n,isLoaded:i,collectionName:r})}}),o.a.createElement(p.b,{path:"/img/create-faves",render:function(){return e.props.isLoaded?o.a.createElement(y,{faveImageCollections:l,createNewClick:s,loadFaveCollection:v,updateFaveCollectionsList:h}):o.a.createElement(E,{allImageData:a,faveImageData:n,isLoaded:i,collectionName:r})}}),o.a.createElement(p.b,{path:"/img/view-faves",component:function(){return o.a.createElement(y,{faveImageCollections:l,loadFaveCollection:v,updateFaveCollectionsList:h})}})))}}]),a}(n.Component)),j=function(e){Object(r.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).updateFaves=function(){e.getFaves(e.state.collectionName)},e.loadFaveCollection=function(t){e.setState({collectionName:t},(function(){e.getFaves(e.state.collectionName)}))},e.getFaves=function(t){w.getCollection(t).then((function(t){e.setState({faveImageData:t.images})}))},e.updateFaveCollectionsList=function(){console.log("test"),g.getFaveCollections().then((function(t){return e.setState({isLoaded:!0,faveImageCollections:t.mongoData})}))},e.state={allImageData:[],faveImageData:[],faveImageCollections:[],isLoaded:!1,isFaveCollection:!0,createNewClick:!0,hasFaves:!1,collectionName:""},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;g.getAllImages().then((function(t){e.setState({allImageData:t.mongoData})})),this.updateFaveCollectionsList()}},{key:"render",value:function(){var e=this.state,t=e.allImageData,a=e.faveImageData,n=e.faveImageCollections,l=e.isLoaded,i=e.isFaveCollection,c=e.createNewClick,s=e.collectionName;return o.a.createElement("div",{className:"main"},o.a.createElement(I,{allImageData:t,faveImageData:a,faveImageCollections:n,isLoaded:l,isFaveCollection:i,createNewClick:c,collectionName:s,loadFaveCollection:this.loadFaveCollection,updateFaves:this.updateFaves,updateFaveCollectionsList:this.updateFaveCollectionsList}))}}]),a}(n.Component);var O=function(){return o.a.createElement("div",{className:"App"},o.a.createElement(j,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(O,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[22,1,2]]]);
//# sourceMappingURL=main.3c1bf7b7.chunk.js.map